<html>
  <head>
	  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>i5ting_ztree_toc:help</title>
		<link href="toc/style/github-bf51422f4bb36427d391e4b75a1daa083c2d840e.css" media="all" rel="stylesheet" type="text/css"/>
		<link href="toc/style/github2-d731afd4f624c99a4b19ad69f3083cd6d02b81d5.css" media="all" rel="stylesheet" type="text/css"/>
		<link href="toc/css/zTreeStyle/zTreeStyle.css" media="all" rel="stylesheet" type="text/css"/>
	  <style>
		pre {
		    counter-reset: line-numbering;
		    border: solid 1px #d9d9d9;
		    border-radius: 0;
		    background: #fff;
		    padding: 0;
		    line-height: 23px;
		    margin-bottom: 30px;
		    white-space: pre;
		    overflow-x: auto;
		    word-break: inherit;
		    word-wrap: inherit;
		}

		pre a::before {
		  content: counter(line-numbering);
		  counter-increment: line-numbering;
		  padding-right: 1em; /* space after numbers */
		  width: 25px;
		  text-align: right;
		  opacity: 0.7;
		  display: inline-block;
		  color: #aaa;
		  background: #eee;
		  margin-right: 16px;
		  padding: 2px 10px;
		  font-size: 13px;
		  -webkit-touch-callout: none;
		  -webkit-user-select: none;
		  -khtml-user-select: none;
		  -moz-user-select: none;
		  -ms-user-select: none;
		  user-select: none;
		}

		pre a:first-of-type::before {
		  padding-top: 10px;
		}

		pre a:last-of-type::before {
		  padding-bottom: 10px;
		}

		pre a:only-of-type::before {
		  padding: 10px;
		}

		.highlight { background-color: #ffffcc } /* RIGHT */
		</style>
  </head>
  <body>
	  <div>
				<div style='width:25%;'>
						<ul id="tree" class="ztree" style='width:100%'>

						</ul>
				</div>
        <div id='readme' style='width:70%;margin-left:20%;'>
          	<article class='markdown-body'>
<h1 id="-1-">第1章 系统介绍</h1>
<h2 id="1-1-">1.1 系统登录</h2>
<p>访问地址：<a href="http://ip:端口/项目名称，如[http://127.0.0.1/ap](http://127.0.0.1:8080/ap)">http://ip:端口/项目名称，如[http://127.0.0.1/ap](http://127.0.0.1:8080/ap)</a></p>
<p>默认管理员账号：admin</p>
<p>初始密码：Admin201#</p>
<h2 id="1-2-">1.2 页面布局</h2>
<p><img src="media/efecc7dcbc9ee17dc251909989117010.png" alt="图形用户界面, 应用程序, Excel AI 生成的内容可能不正确。"></p>
<h2 id="1-3-">1.3 页面操作</h2>
<p>1、拖拽窗口或者点击界面中缝位置的图标<img src="media/31c6015dc83f2a40f02cd33a2419f5a9.png" alt="G:\\work\\github\\apmd\\Image\\PNG\\025.png">或<img src="media/74e5710c75eecf890973c56e5ba93a49.png" alt="G:\\work\\github\\apmd\\Image\\PNG\\026.png">可实现界面伸缩；</p>
<p>2、点击饼图相应部分可对设备进行筛选；</p>
<p>3、历史曲线和报表曲线，每条曲线的纵坐标最大、最小值可配置。</p>
<h2 id="1-4-oem-">1.4 OEM配置</h2>
<p>先停止tomcat，配置完成后再启动</p>
<p>打开tomcat安装目录\webapps\ap\WEB-INF\classes\config\config.yml文件，根据配置打开相应的oem配置文件，进行相应配置</p>
<p>config.yml文件相关呢容：</p>
<p><img src="media/fbe5a2be6680db11b07f6978e7da50de.png" alt=""></p>
<p>oem配置文件，如oemConfig_cnpc.yml：</p>
<p><img src="media/9aa3510ad1dd565cb6ccb1664abb2ac8.png" alt=""></p>
<p>oem内容修改后，修改静态资源时间戳（首次部署不需要），无需清理浏览器缓存即可生效。</p>
<h2 id="1-5-">1.5 软件启停</h2>
<h3 id="1-5-1-">1.5.1 手动启停</h3>
<h4 id="1-5-1-1-windows-">1.5.1.1 windows环境</h4>
<p>1、单井计算开发包ac</p>
<p>启动：</p>
<p>双击exe文件启动或者通过命令行启动</p>
<p>停止：</p>
<p>关闭运行窗口即停止</p>
<p>2、协议通ad</p>
<p>启动：</p>
<p>双击exe文件启动或者通过命令行启动</p>
<p>停止：</p>
<p>关闭运行窗口即停止</p>
<p>3、缓存数据库redis</p>
<p>启动：</p>
<p>运行“redis-server C://redis7/redis.conf”启动redis，命令中的配置文件路径以实际为准。</p>
<p><img src="media/fff296bcc12ecec93b9cfc7f1d121d72.png" alt=""></p>
<p>停止：</p>
<p>关闭运行窗口即停止</p>
<p>4、oracle数据库</p>
<p>启动：</p>
<p>运行“services.msc”打开服务管理界面，将监听服务与数据库服务启动。</p>
<p><img src="media/3536a1b223f2c905fcd20b835d4cb861.png" alt=""></p>
<p><img src="media/445498d2bd57679fb9ee141c3135b7f3.png" alt=""></p>
<p>停止：</p>
<p>运行“services.msc”打开服务管理界面，将监听服务与数据库服务停止。</p>
<p><img src="media/3536a1b223f2c905fcd20b835d4cb861.png" alt=""></p>
<p><img src="media/14b8516bec7eaffb76baa561f75ef429.png" alt=""></p>
<p>5、tomcat</p>
<p>启动：</p>
<p>找到在系统栏加载的Tomcat运行图标，右键→Start service</p>
<p><img src="media/b401f5d04fb5f6247b739d648d818082.png" alt=""></p>
<p>停止：</p>
<p>找到在系统栏加载的Tomcat运行图标，右键→Stop service</p>
<p><img src="media/7c50f40bd869dbf0c02937c0fe0e23aa.png" alt=""></p>
<h4 id="1-5-1-2-linux-">1.5.1.2 linux环境</h4>
<p>1、单井计算开发包ac</p>
<p>启动：</p>
<p>nohup /usr/local/ac -o close&amp;</p>
<p>停止：</p>
<p>1）查看进程</p>
<p>ps –e</p>
<p><img src="media/f53c7d36002dcfcadaa82e002652355d.png" alt=""></p>
<p>2）杀掉ac进程</p>
<p>kill -9 26630</p>
<p>2、协议通ad</p>
<p>启动：</p>
<p>nohup /usr/local/ad -o file&amp;</p>
<p>停止：</p>
<p>1）查看进程</p>
<p>ps –e</p>
<p><img src="media/1118918a60727aeaf5e405b3143e6c86.png" alt=""></p>
<p>2）杀掉ad进程</p>
<p>kill -9 22030</p>
<p>3、缓存数据库redis</p>
<p>启动：</p>
<p>nohup /opt/redis-7.0.9/src/redis-server /opt/redis-7.0.9/redis.conf&amp;</p>
<p>停止：</p>
<p>/opt/redis-7.0.9/src/redis-cli shutdown</p>
<p>4、oracle数据库</p>
<p>启动：</p>
<p>1）启动oracle监听</p>
<p>su - oracle -lc &quot;/opt/oracle/product/19c/dbhome_1/bin/lsnrctl start&quot;</p>
<p>2）启动oracle服务</p>
<p>su - oracle -lc &quot;/opt/oracle/product/19c/dbhome_1/bin/dbstart&quot;</p>
<p>停止：</p>
<p>1）停止oracle监听</p>
<p>su - oracle -lc &quot;/opt/oracle/product/19c/dbhome_1/bin/lsnrctl stop&quot;</p>
<p>2）停止oracle服务</p>
<p>su - oracle -lc &quot;/opt/oracle/product/19c/dbhome_1/bin/dbshut &quot;</p>
<p>5、tomcat</p>
<p>启动：</p>
<p>/opt/apache-tomcat-9.0.73/bin/startup.sh</p>
<p>停止：</p>
<p>/opt/apache-tomcat-9.0.73/bin/shutdown.sh</p>
<h3 id="1-5-2-">1.5.2 开机启动</h3>
<h4 id="1-5-2-1-windows-">1.5.2.1 windows环境</h4>
<p>1、oracle开机启动：</p>
<p>运行“services.msc”打开服务管理界面，将监听服务与数据库服务启动类型设为自动，设置步骤：右键→属性→启动类型选自动。</p>
<p><img src="media/3536a1b223f2c905fcd20b835d4cb861.png" alt=""></p>
<p><img src="media/5f6c89a7d9dbb5724d5faac191b8d0ab.png" alt=""></p>
<p><img src="media/f6e397998349556811789329d6c0d317.png" alt=""></p>
<p>2、tomcat开机启动：</p>
<p>找到在系统栏加载的Tomcat运行图标，右键可以看到设置项目</p>
<p><img src="media/ce0517df16f3703e971dca2152b498ff.png" alt=""></p>
<p>Configure或直接双击系统栏加载的Tomcat图标，出现Tomcat设置界面</p>
<p><img src="media/c44a88161a15125cba47b4d785d5e223.png" alt=""></p>
<p>Startup type：Tomcat启动方式，Automatic-自动、Manual-手动、Disabled-禁用，选择Automatic</p>
<p><img src="media/9ab22a4eaeb5d4c3d8b859dff58a5ef3.png" alt=""></p>
<p>3、ac、ad与redis开机启动：</p>
<p>可利用批处理文件bat批量启动</p>
<p>（1）创建批处理文件startup.bat文件，右键→编辑，录入一下内容：</p>
<p>@echo off</p>
<p>start &quot;&quot; &quot;C:\Users\Administrator\Desktop\ac.exe&quot;</p>
<p>start &quot;&quot; &quot;C:\Users\Administrator\Desktop\ad.exe&quot;</p>
<p>redis-server C://redis7/redis.conf</p>
<p>（2）将startup.bat文件放到启动文件夹“C:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp”下，如此则系统启动后，自动执行startup.bat文件。</p>
<h4 id="1-5-2-2-linux-">1.5.2.2 linux环境</h4>
<p><strong>1、root用户修改/etc/rc.d/rc.local文件</strong></p>
<p>su root</p>
<p>vim /etc/rc.d/rc.local</p>
<p>添加以下内容：</p>
<p>#启动oracle监听</p>
<p>su - oracle -lc &quot;/opt/oracle/product/19c/dbhome_1/bin/lsnrctl start&quot;</p>
<p>#启动oracle服务</p>
<p>su - oracle -lc &quot;/opt/oracle/product/19c/dbhome_1/bin/dbstart&quot;</p>
<p>#启动redis</p>
<p>nohup /opt/redis-7.0.9/src/redis-server /opt/redis-7.0.9/redis.conf > /dev/null 2>&amp;1 &amp;</p>
<p>#启动ac</p>
<p>nohup /usr/local/ac -o file > /dev/null 2>&amp;1 &amp;</p>
<p>#启动ad</p>
<p>nohup /usr/local/ad -o file > /dev/null 2>&amp;1 &amp;</p>
<p>#启动tomcat</p>
<p>/opt/apache-tomcat-9.0.73/bin/startup.sh</p>
<p>添加后保存退出</p>
<p><strong>2、rc.local文件授权</strong></p>
<p>chmod +x /etc/rc.d/rc.local</p>
<p><strong>3、oracle额外配置</strong></p>
<p>oracle开机启动，除了以上配置外，还需一些其他设置</p>
<p>1）root用户修改 /etc/oratab文件, 将N改为Y</p>
<p>su root</p>
<p>vim /etc/oratab</p>
<p>将N改成Y</p>
<p>orcl:/data1/opt/oracle/app/oracle/product/19/dbhome_1:N</p>
<p>2）oracle用户修改dbstart及dbshut文件</p>
<p>su - oracle</p>
<p>cd \$ORACLE_HOME/bin</p>
<p>vim dbstart</p>
<p>修改#ORACLE_HOME_LISTNER=\$为ORACLE_HOME_LISTNER=\$ORACLE_HOME</p>
<p>vim dbshut</p>
<p>修改#ORACLE_HOME_LISTNER=\$1为ORACLE_HOME_LISTNER=\$ORACLE_HOME</p>
<p>全部配置成功后，reboot重启服务器</p>
<p>su root</p>
<p>reboot</p>
<h1 id="-2-">第2章 应用示例</h1>
<h2 id="2-1-">2.1 驱动配置</h2>
<p>包括协议配置、单元组态、实例组态。</p>
<p><img src="media/e13a790895e5ae9511a18f7fa78ab806.png" alt="图形用户界面, 应用程序, Excel AI 生成的内容可能不正确。"></p>
<h3 id="2-1-1-">2.1.1 协议配置</h3>
<p><img src="media/8b2c226b37272d7817850d49e0fbdaf3.png" alt="图形用户界面, 应用程序, 表格, Excel AI 生成的内容可能不正确。"></p>
<h4 id="2-1-1-1-">2.1.1.1 属性配置</h4>
<p>在属性标签页配置协议的名称和排序序号</p>
<p><img src="media/504d89213b86561475e543b431b78e89.png" alt=""></p>
<h4 id="2-1-1-2-">2.1.1.2 内容配置</h4>
<p><strong>名称</strong>：字段名称；</p>
<p><strong>起始地址</strong>：字段起始地址，数组地址、modbus协议寄存器地址；</p>
<p><strong>存储数据类型</strong>：设备中存储该字段的数据类型，包括：bit、byte、int16（有符号16位整型）、uint16（无符号16位整型）、float32（32位浮点）、bcd（bcd码，时间一般配置为该类型）；</p>
<p><strong>存储数据数量</strong>：存储数据类型的数量，如1个uint16，1个float32，24个bcd码；</p>
<p><strong>读写类型</strong>：只读、只写或者读写；</p>
<p><strong>响应模式</strong>：主动上传（设备主动上传）、被动响应（设备被动等待上位机读写）。</p>
<p><strong>接口数据类型</strong>：上位机要解析成的数据类型(界面显示的数据)，包括bool（布尔型）、int（整型）、float32（32位浮点）、float64（64位浮点）、string（字符串），位数组和开关量接口数据类型固定选择bool型；</p>
<p><strong>小数位数</strong>：保存数据小数位数；</p>
<p><strong>换算比例</strong>：存储数据*换算比例=接口数据（解析数据时，存储数据解析后乘以换算比例，得到界面显示的接口数据；控制设备时，界面输入的控制值为接口数据，除以换算比例，为最终写入到设备中的存储数据）；</p>
<p><strong>单位</strong>：上位机解析后的单位（和界面显示一致）；</p>
<p><strong>解析模式</strong>：数据量、枚举量、开关量；</p>
<h4 id="2-1-1-3-">2.1.1.3 字段含义配置</h4>
<p>枚举量：如变频器运行状态值对应的含义配置</p>
<p><img src="media/cdd5c58965ca31f4c5afdd05655db36e.png" alt=""></p>
<p>开关量：如保护开关位数组，位所对应的开关含义</p>
<p><img src="media/5e244f03bab084cd339abd7b52976bf2.png" alt=""></p>
<p>数据量：如井口温度，将值-50设置为无效数据N/A</p>
<p><img src="media/eb7bf0b6fcf4bc651ab34ceb8a225ef1.png" alt=""></p>
<h4 id="2-1-1-4-">2.1.1.4 关联计算字段及运行状态配置</h4>
<p>点击“存储字段表”按钮，查看根据协议自动生成的映射表。</p>
<p>关联计算字段配置：特殊含义的字段，需要设置关联计算字段供系统识别。</p>
<p>运行状态配置：关联计算字段为运行状态的项，可以设定特定值（枚举量）或者范围（数据量）。</p>
<p><img src="media/390a6041f559b2d486af9a21bda0d7dd.png" alt="图形用户界面 AI 生成的内容可能不正确。"></p>
<h4 id="2-1-1-5-">2.1.1.5 协议隶属迁移</h4>
<p>点击“协议隶属迁移”按钮，修改协议所属设备类型</p>
<p><img src="media/d2d15cacb4d0c01a79e970a549164a6b.png" alt="图形用户界面, 文本, 应用程序, 聊天或短信 AI 生成的内容可能不正确。"></p>
<h3 id="2-1-2-">2.1.2 采控单元</h3>
<p>在协议下面创建采控单元，每个采控单元下面可以创建一个采集组和一个控制组，并勾选采集组和控制组包含的项，以及配置哪些项需要进行日累计计算（如由有功功耗计算日用电量）。</p>
<p><img src="media/bb34febc2d21dfc2d386f90056b14078.png" alt="图形用户界面, 应用程序, 表格 AI 生成的内容可能不正确。"></p>
<h3 id="2-1-3-">2.1.3 显示单元</h3>
<p>在协议下面创建显示单元，并设置单元下包含的内容及曲线。</p>
<p><img src="media/ee7ac73a8c0fb974f99b78c9a6e0f5a4.png" alt=""></p>
<p>1、采集项、计算项和录入项</p>
<p><strong>显示级别</strong>：采集项显示级别，用户只能查看显示级别小于自身数据显示级别的数据（见角色管理模块和用户管理模块，数字越小代表等级越大）；</p>
<p><strong>实时监控/动态数据/动态数据、字段顺序</strong>：对应实时监控模块中实时数据表和历史查询模块中详细数据表中字段的显示内容和顺序（左到右、上到下顺序），未设置顺序将放在最后面显示；</p>
<p><strong>实时监控/动态数据/前景色</strong>：对应实时监控模块中实时数据表相应显示项的字体颜色，与背景色一起，可重点显示某些内容, 双击单元格进行配置；</p>
<p><strong>实时监控/动态数据/背景色</strong>：对应实时监控模块中实时数据表相应显示项的背景色，与前景色一起，可重点显示某些内容, 双击单元格进行配置；</p>
<p>实时监控动态数据显示效果如下：</p>
<p><img src="media/f92223ab954829b4ef1a0d484e26f719.png" alt="图形用户界面, 表格 AI 生成的内容可能不正确。"></p>
<p><strong>实时监控/动态数据/趋势曲线</strong>：实时曲线显示顺序、颜色、样式等，未设置则不显示曲线，双击单元格进行配置，对应实时监控模块中趋势曲线</p>
<p><img src="media/3853710399037a0e7f12ce0443de6654.png" alt="图形用户界面 AI 生成的内容可能不正确。">显示</p>
<p>实时监控趋势曲线显示效果如下：</p>
<p><img src="media/1f533093e5fdbb0e333bbcae1d26a538.png" alt="图形用户界面, 表格 AI 生成的内容可能不正确。"></p>
<p><strong>历史查询/历史数据/历史数据、字段顺序</strong>：对应历史查询模块中历史数据表显示内容和顺序，未设置顺序将放在最后面显示；</p>
<p><strong>历史查询/历史数据/前景色</strong>：对应历史查询模块中详细数据表相应单元格的字体颜色, 双击单元格进行配置；</p>
<p><strong>历史查询/历史数据/背景色</strong>：对应历史查询模块中详细数据表相应单元格的背景色, 双击单元格进行配置；</p>
<p>历史数据显示效果如下：</p>
<p><img src="media/b5a2e8b9446e65c7e2fb652c34e9ded0.png" alt="图形用户界面, 应用程序, 表格 AI 生成的内容可能不正确。"></p>
<p><strong>历史查询/历史数据/趋势曲线</strong>：历史曲线显示顺序、颜色、样式等，未设置则不显示曲线，双击单元格进行配置，显示效果如下：</p>
<p><img src="media/7222b073e47b8e039c8069b457befdef.png" alt="图形用户界面, 文本, 应用程序 AI 生成的内容可能不正确。"></p>
<p>2、控制项</p>
<p><strong>显示级别</strong>：采集项显示级别，用户只能查看显示级别小于自身数据显示级别的数据（见角色管理模块和用户管理模块，数字越小代表等级越大）；</p>
<p><strong>字段顺序</strong>：对应实时监控模块中设备控制中的控制项显示顺序。</p>
<p>控制项显示效果如下：</p>
<p><img src="media/ffa2a11fc136394ba6209194e17d0b20.png" alt="图形用户界面, 应用程序, Word AI 生成的内容可能不正确。"></p>
<h3 id="2-1-4-">2.1.4 报警单元</h3>
<p>在协议下面创建报警单元，并设置单元下包含的报警项及报警配置。</p>
<p><img src="media/04c29745ef5cc1f33286aacfa84b8504.png" alt="表格 AI 生成的内容可能不正确。"></p>
<p>分别配置数据量、开关量、枚举量、工况诊断、运行状态、通信状态报警项，配置项如下：</p>
<p><strong>上限</strong>：报警上限；</p>
<p><strong>下限</strong>：报警下限；</p>
<p><strong>回差</strong>：回差值即报警后返回到非报警状态时需要的一个差值，例如报警上限设置为60，回差值为5，当数据达到60时产生报警，如果要消除报警，则需要等待数据达到55以下；</p>
<p><strong>延时持续检测</strong>：达到报警条件后，持续所设时间后，判断为报警，中间如果恢复正常，则取消报警；</p>
<p><strong>再次触发间隔</strong>：间隔时间内不重复报警和推送；</p>
<p><strong>报警级别</strong>：正常、一级报警、二级报警、三级报警（一级为最紧急严重）；</p>
<p><strong>报警使能</strong>：使能或者失效（失效则一律不报警）；</p>
<p><strong>是否发送短信</strong>：报警发生时是否向用户发送短信（建议一级报警项设为是，其他为否，避免频繁发送）；</p>
<p><strong>是否发送邮件</strong>：报警发生时是否向用户发送邮件（建议一级报警项设为是，其他为否，避免频繁发送）；</p>
<p><strong>触发状态</strong>：开关量数据生效，开或者关触发报警；</p>
<p><strong>报警颜色配置：</strong></p>
<p>点击“报警颜色配置”按钮，对通信状态、运行状态以及各级别报警的颜色进行配置。</p>
<p><img src="media/7645f723f5c00b9e8d9d56f86f1496ce.png" alt=""></p>
<p>通信状态颜色：在线状态和离线状态报警颜色配置，生效范围：</p>
<p>1）实时监控模块：设备概览表中通信状态列；</p>
<p>2）实时监控模块：通信状态统计饼图颜色(在线、离线所设前景色)；</p>
<p>3）历史查询模块：设备列表和历史数据表中通信状态列；</p>
<p>4）历史查询模块：通信状态统计饼图颜色(在线、离线所设前景色)。</p>
<p>运行状态颜色：运行状态和停抽状态报警颜色配置，生效范围：</p>
<p>1）实时监控模块：设备概览表中运行状态列；</p>
<p>2）实时监控模块：运行状态统计饼图颜色(在线、离线所设前景色)；</p>
<p>3）历史查询模块：设备列表和历史数据表中运行状态列；</p>
<p>4）历史查询模块：运行状态统计饼图颜色(在线、离线所设前景色)。</p>
<p>报警等级颜色：数据报警等级颜色配置，生效范围：</p>
<p>1）实时监控模块：设备概览表和实时数据表中采集数据报警颜色；</p>
<p>2）历史查询模块：历史数据表和详细数据表中采集数据报警颜色。</p>
<h3 id="2-1-5-">2.1.5 报表单元</h3>
<p>添加报表单元并分别配置单井报表中的班报表和日报表、区域报表中日报表的报表模板及报表内容、曲线。</p>
<h4 id="2-1-5-1-">2.1.5.1 属性配置</h4>
<p>在属性标签页配置报表单元名称、计算类型和排序序号</p>
<p><img src="media/3c377f536b326917b7a724308c727d26.png" alt="表格 AI 生成的内容可能不正确。"></p>
<h4 id="2-1-5-2-">2.1.5.2 单井报表/班报表配置</h4>
<p><img src="media/209c3855eeca90e492f1b8dc5ef15568.png" alt="电脑软件截图 AI 生成的内容可能不正确。"></p>
<p>点击“配置”，弹出报表内容配置窗口</p>
<p><img src="media/9768e81cb9191cd6b8c750ad55287d1b.png" alt=""></p>
<p><strong>统计方式</strong>：可选择最大值、最小值、平均值、最新值、最旧值、日累计值作为报表中显示的内容，为空则显示原始值；</p>
<p><strong>显示级别</strong>：用户只能查看显示级别小于自身数据显示级别的数据（见角色管理模块和用户管理模块，数字越大代表等级越小）；</p>
<p><strong>小数位数</strong>：报表中显示数据的小数位数；</p>
<p><strong>报表曲线</strong>：配置报表曲线内容，双击单元格进行配置，未设置则不显示曲线。</p>
<h4 id="2-1-5-3-">2.1.5.3 单井报表/日报表配置</h4>
<p><img src="media/d2aaec224c04266953dddf0dd97db419.png" alt="应用程序, 表格, Excel AI 生成的内容可能不正确。"></p>
<p>点击“配置”，弹出报表内容配置窗口</p>
<p><img src="media/0ce678aa67724ffeb5a03746ea14688a.png" alt=""></p>
<p><strong>统计方式</strong>：可选择最大值、最小值、平均值、最新值、最旧值、日累计值作为报表中显示的内容，为空则显示原始值；</p>
<p><strong>显示级别</strong>：用户只能查看显示级别小于自身数据显示级别的数据（见角色管理模块和用户管理模块，数字越大代表等级越小）；</p>
<p><strong>小数位数</strong>：报表中显示数据的小数位数；</p>
<p><strong>报表曲线</strong>：配置报表曲线内容，双击单元格进行配置，未设置则不显示曲线。</p>
<h4 id="2-1-5-4-">2.1.5.4 区域报表/日报表配置</h4>
<p><img src="media/7b4b2a7f271f2ec1e578be1f9469bcc5.png" alt="电脑软件截图 AI 生成的内容可能不正确。"></p>
<p>点击“配置”，弹出报表内容配置窗口</p>
<p><img src="media/5a1078724f5670496ad078f16fe15bcd.png" alt=""></p>
<p><strong>统计方式</strong>：可选择最大值、最小值、平均值、最新值、最旧值、日累计值作为报表中显示的内容，为空则显示原始值；</p>
<p><strong>显示级别</strong>：用户只能查看显示级别小于自身数据显示级别的数据（见角色管理模块和用户管理模块，数字越大代表等级越小）；</p>
<p><strong>小数位数</strong>：报表中显示数据的小数位数；</p>
<p><strong>求和</strong>：是否在报表中显示该项的和；</p>
<p><strong>求平均</strong>：是否在报表中显示该项的平均值；</p>
<p><strong>报表曲线</strong>：配置报表曲线内容，双击单元格进行配置，未设置则不显示曲线；</p>
<p><strong>曲线统计类型</strong>：曲线数据是各设备该项数据的和还是平均值。</p>
<h3 id="2-1-6-">2.1.6 采控实例</h3>
<p>配置完采控单元后（确定采控项和地址配置），还需配置采控实例（读写以及解析时具体的协议），实例和设备直接关联（见2.2.1主设备）。</p>
<p>点击“添加实例”按钮，进行创建。</p>
<p><img src="media/4f9fdbe7618962d27c7365c9d451c641.png" alt=""></p>
<p>实例名称：实例名称；</p>
<p>采控单元：在下拉框中选择对应的采控单元；</p>
<p>采集协议类型：数据采集及解析具体协议，如modbus-tcp；</p>
<p>控制协议类型：设备控制具体协议，如modbus-tcp；</p>
<p>注册包前后缀16进制：注册包前后缀为十六进制还是ASC；</p>
<p>注册包前缀：注册包是设备上线时发送的信息，包含设备ID信息，如没有则不填写；</p>
<p>注册包后缀：如没有注册包则不填写；</p>
<p>注册包ID16进制：注册包内容为十六进制还是ASC；</p>
<p>心跳包前后缀16进制：心跳包前后缀为十六进制还是ASC；</p>
<p>心跳包前缀：心跳包用于判断设备连接状态，如没有则不填写；</p>
<p>心跳包后缀：如没有心跳包则不填写；</p>
<p>单包发送间隔(ms)：读取数据时，数据包发送间隔；</p>
<p>排序：实例排序序号，对应树形列表中实例显示顺序。</p>
<h3 id="2-1-7-">2.1.7 显示实例</h3>
<p>置完显示单元后，还需配置显示实例，显示实例和设备直接关联（见2.2.1主设备）。</p>
<p>点击“添加实例”按钮，进行创建。</p>
<p><img src="media/c6fa0c7dc6693f91dab012ca51b67c46.png" alt=""></p>
<p>实例名称：实例名称；</p>
<p>显示单元：在下拉框中选择对应的显示单元；</p>
<p>排序：实例排序序号，对应树形列表中实例显示顺序。</p>
<h3 id="2-1-8-">2.1.8 报警实例</h3>
<p>配置完报警单元后，还需配置报警实例，报警实例和设备直接关联（见2.2.1主设备）。</p>
<p>点击“添加实例”按钮，进行创建。</p>
<p><img src="media/725153744da4e4a9b3d44012af3ebf2b.png" alt=""></p>
<p>实例名称：实例名称；</p>
<p>报警单元：在下拉框中选择对应的报警单元；</p>
<p>排序：实例排序序号，对应树形列表中实例显示顺序。</p>
<h3 id="2-1-9-">2.1.9 报表实例</h3>
<p>配置完报表单元后，还需配置报表实例，报表实例和设备直接关联（见2.2.1主设备）。</p>
<p>点击“添加实例”按钮，进行创建。</p>
<p><img src="media/74f9f9b62113d90298a56a532c891ba5.png" alt="图形用户界面, 文本, 应用程序 AI 生成的内容可能不正确。"></p>
<p>实例名称：实例名称；</p>
<p>报表单元：在下拉框中选择对应的报表单元；</p>
<p>排序：实例排序序号，对应树形列表中实例显示顺序。</p>
<h3 id="2-1-10-">2.1.10 删除操作</h3>
<p>在相应的列表中选中要删除的项，右键→删除</p>
<h2 id="2-2-">2.2 设备管理</h2>
<h3 id="2-2-1-">2.2.1 主设备</h3>
<p>按照2.1节中添加好驱动相关的数据后，在该模块添加设备。</p>
<h4 id="2-2-1-1-">2.2.1.1 添加设备</h4>
<p>点击“添加设备”按钮，将在选中的单位下添加设备，如没有选中单位，则在第一个单位下添加，同一单位下不能添加同名设备。</p>
<p><img src="media/8cc0362b0f33c1488fd3046ba682a061.png" alt=""></p>
<p>井名：同一单位下不能添加同名设备；</p>
<p>采控实例：对应驱动配置/实例配置/采控实例中配置的实例；</p>
<p>显示实例：对应驱动配置/实例配置/显示实例中配置的实例；</p>
<p>报表实例：对应驱动配置/实例配置/报表实例中配置的实例；</p>
<p>报警实例：对应驱动配置/实例配置/报警实例中配置的实例；</p>
<p>下位机TCP类型：TCP Client或者TCP Server；</p>
<p>注册包ID：下位机TCP Client模式需配置；</p>
<p>下位机IP端口：下位机TCP Server模式需配置；</p>
<p>设备从地址：如01、02；</p>
<p>错峰延时：采集数据时延时采集时间，以免设备同时采集资源紧张；</p>
<p>状态：设为失效后，将不再采集该设备的数据；</p>
<p>排序编号：设备显示顺序；</p>
<h4 id="2-2-1-2-">2.2.1.2 设备查看及修改</h4>
<p><img src="media/94a7f6198a053e165eec47291f648e51.png" alt="图形用户界面, 应用程序, 表格, Excel AI 生成的内容可能不正确。"></p>
<p>1、在设备列表处进行设备主要信息查看和修改：</p>
<p>2、附加信息</p>
<p><img src="media/bfbd02c857a6f0345dcdb4d20926c2a0.png" alt=""></p>
<p>3、辅件设备</p>
<p>勾选设备的辅件设备信息（辅件设备维护见2.2.2节），指定类型为抽油机的辅件设备，只能单选。</p>
<p><img src="media/2511f1ed5d6df2d0d794dfa558320783.png" alt="表格 AI 生成的内容可能不正确。"></p>
<p>3、视频配置</p>
<p>需要首先录入视频密钥信息，具备视频密钥编辑权限的用户，点击“编辑视频密钥”按钮，维护密钥信息</p>
<p><img src="media/27a4021ef631d43ad0a0f84bb8dd157d.png" alt=""></p>
<p><img src="media/fd093e82eed8782bbca8dcabb2169103.png" alt=""></p>
<p>3、生产数据配置</p>
<p>需要进行功图计算或者转速计产，配置计算所需的基础数据，并可进行上行（从设备读取）与下行（写入到设备中）操作。</p>
<p><img src="media/99a5e55c4255a2e136a2ff02e3278dbe.png" alt="图形用户界面, 表格 AI 生成的内容可能不正确。"></p>
<p>特别说明：净毛比与净毛值</p>
<p>净毛比与净毛值用于标定产量，标定方式为：y=ax+b，a-净毛比 b-净毛值 x-标定前产量 y-标定后产量，净毛比默认为1，净毛值默认为0，则不进行标定。</p>
<p>抽油机数据：在此页面配置抽油机型号（也可在辅件设备标签页选择）、冲程以及平衡块位置重量（仅功图计算需要）。</p>
<p><img src="media/495a3c58472d7102a92aef13029caddc.png" alt="表格 AI 生成的内容可能不正确。"></p>
<p><img src="media/ce90cc211864946fa8faece66e3bdc62.png" alt="表格 AI 生成的内容可能不正确。"></p>
<p>4、功图构建</p>
<p>录入功图构建所需参数，并可进行上行（从设备读取）与下行（写入到设备中）操作。</p>
<p><img src="media/d545d06b31b0824576c76ec8dcb19c91.png" alt="图形用户界面 AI 生成的内容可能不正确。"></p>
<p>5、设备配置</p>
<p>上行（从设备读取）与下行（写入到设备中）设备系统日期、时间。</p>
<p><img src="media/974322c308c9d8351f77a395cfe21764.png" alt="图形用户界面, 应用程序, 电子邮件 AI 生成的内容可能不正确。"></p>
<h4 id="2-2-1-3-">2.2.1.3 删除设备</h4>
<p>在设备列表中选中删除的设备，点击“删除设备”按钮，进行删除操作。</p>
<h4 id="2-2-1-4-">2.2.1.4 批量添加</h4>
<p>点击“批量添加”按钮，在所选单位下进行设备批量添加。在弹出的窗口中编辑添加的设备信息（可在excel中编辑好，粘贴到表格中），点击“保存”按钮进行保存。校验无问题的数据直接保存，有问题的数据返回并显示异常数据处理窗口，在窗口中进行数据修改二次保存，或者放弃。无异常数据直接保存成功。</p>
<p><img src="media/252168693a7fe01adb1b829bb2d998c8.png" alt=""></p>
<p>保存后，如果有校验不通过的数据，会显示异常数据处理窗口。异常数据分为冲突数据(注册包ID、设备从地址和已有设备冲突)和已有数据（同一单位下已存在同名设备）。</p>
<p>冲突数据修改注册包ID和设备从地址，直到无冲突时才可保存成功。</p>
<p>已有数据继续保存的话，覆盖同名设备的信息，不会添加设备。</p>
<p><img src="media/d84927f0ab7853f3c1fd0d7399387171.png" alt=""></p>
<h3 id="2-2-2-">2.2.2 辅件设备</h3>
<p>辅件设备维护</p>
<p><img src="media/0f3d818276fc807e28bab8547c00060d.png" alt="图形用户界面, 应用程序, 表格 AI 生成的内容可能不正确。"></p>
<p>特殊类型如抽油机，指定类型选择抽油机，并录入相应参数以及不同冲程对应的位置扭矩因数。</p>
<h1 id="-3-">第3章 其他配置</h1>
<h2 id="3-1-">3.1 语言配置</h2>
<p>1、登录界面语言</p>
<p>先停止tomcat，配置完成后再启动；</p>
<p>打开tomcat安装目录\webapps\ap\WEB-INF\classes\config文件夹下，打开相应oem配置文件，配置登录界面语言</p>
<p><img src="media/b08ffb0278e9d1bd4080f34244502185.png" alt="文本 AI 生成的内容可能不正确。"></p>
<p>2、登录系统后的语言选择</p>
<p>在组织用户模块，可为不同的用户配置各自的语言，配置完成后，则用户登录后界面显示其对应的语言版本。</p>
<p><img src="media/74ccede039f2efbe84e56c1a08a3d357.png" alt="图形用户界面, 应用程序, Word AI 生成的内容可能不正确。"></p>
<h2 id="3-2-">3.2 邮件发送账号配置</h2>
<p>如需发送邮件（如报警邮件），参考本节内容配置邮件发送账号。</p>
<p>先停止tomcat，配置完成后再启动；</p>
<p>打开tomcat安装目录\webapps\ap\WEB-INF\classes\config文件夹下，打开相应oem配置文件，配置邮箱信息</p>
<p><img src="media/4e5bcf573fbf5d849e6021c6bcf6c571.png" alt=""></p>
<h2 id="3-3-">3.3 其他项配置</h2>
<p>软件的一些其他配置，一般情况下不用修改.</p>
<p>先停止tomcat，配置完成后再启动。</p>
<p>打开tomcat安装目录\webapps\ap\WEB-INF\classes\config文件夹下，打开相应oem配置文件，配置项见下图：</p>
<p><img src="media/56509da5fcaef32712ca3e9b6e0d3ad3.png" alt="文本 AI 生成的内容可能不正确。"></p>
<h2 id="3-4-oracle-">3.4 oracle常见问题</h2>
<p>1、关闭oracle监听日志</p>
<p>随着系统的运行，oracle的日志文件会越来越大，当达到4G时，会影响到数据库的正常运行，可以选择关闭oracle日志文件的生成，操作方法如下。</p>
<p>打开命令窗口，依次执行以下命令进行关闭oracle日志操作，centOS系统下，切换oracle用户执行</p>
<p>su – oracle</p>
<p>1）lsnrctl</p>
<p>2）set log_status off</p>
<p>3）save_config</p>
<p>4）show log_status</p>
<p><img src="media/1ddd3ebcef28e66a22327ee0f124a801.png" alt=""></p>
<p>2、关闭oracle审计功能</p>
<p>随着系统的运行，因AUD\$数据越来越大，导致SYSTEM表空间增大，当达到32G时会影响到数据库的正常运行，必须扩展SYSTEM表空间文件，可以选择关闭oracle审计功能，操作方法如下。</p>
<p>centOS系统下，先切换oracle用户</p>
<p>su – oracle</p>
<p>1）命令窗口执行sqlplus / as sysdba，连接数据库</p>
<p><img src="media/99cc4ce7cd29bddb720b3e9b0b42b9c9.png" alt=""></p>
<p>2）执行“truncate table aud\$;”截断数据</p>
<p><img src="media/67606c59f70a35f79c4326a0001f9a82.png" alt=""></p>
<p>3）执行“alter system set audit_trail=NONE scope=spfile;”修改spfile文件，关闭审计功能。</p>
<p><img src="media/6d3d6a537e1c20ede60e3a6666b26b35.png" alt=""></p>
<p>4）重启数据库：执行“shutdown immediate;”关闭oracle例程后，执行“startup”启动数据库。</p>
<p><img src="media/8c876091da0da46ad25a67612aea9868.png" alt=""></p>
<p>3、SYSAUX表空间过大</p>
<p>SYSAUX表空间是SYSTEM的辅助表空间，存放着AWR快照、统计信息、审计信息等。随着数据库的使用，这些信息可能会快速增长</p>
<p>解决方案：AWR快照是SYSAUX表空间增长的主要原因之一。可以通过删除旧的快照来回收空间</p>
<p>1）查看AWR快照ID范围</p>
<p>SELECT MIN(SNAP_ID), MAX(SNAP_ID) FROM DBA_HIST_SNAPSHOT;</p>
<p>2）删除指定范围内的AWR快照（谨慎操作，确保不会丢失重要性能数据）</p>
<p>EXECUTE DBMS_WORKLOAD_REPOSITORY.DROP_SNAPSHOT_RANGE(MIN_SNAP_ID, MAX_SNAP_ID);</p>
<p>4、UNDOTBS01表空间过大</p>
<p>UNDOTBS01.dbf是oracle系统undo_tablespace使用的，其作用为：回退事务、读一致性、事务恢复、倒叙查询(FlashBack Query)</p>
<p>1）先查看在使用UNDOTBS01.dbf的undo_tablespace表名：</p>
<p>使用sqlplus连接数据库，输入命令</p>
<p>show parameter undo;</p>
<p><img src="media/7e0acd679a5490cebe73fb63d2802407.png" alt="https://i-blog.csdnimg.cn/blog_migrate/c37024a5a76cdb2e060329b3d042606a.png"></p>
<p>2）建立一张新的undo_tablespace：</p>
<p>create undo tablespace undotbs02 datafile &#39;D:\Oracle\oradata\orcl\UNDOTBS02.dbf&#39; size 100m autoextend on next 100m;</p>
<p>3）将系统undo_tablespace指向新的表空间：</p>
<p>alter system set undo_tablespace=undotbs02;</p>
<p>4）删除原来的表空间及数据文件：</p>
<p>drop tablespace undotbs1 including contents and datafiles;</p>
<p>5）若要禁止undo_tablespace自动增长</p>
<p>alter database datafile &#39;D:\Oracle\oradata\orcl\UNDOTBS02.dbf&#39; autoextend off;</p>
<p>5、临时表空间文件TEMP01.DBF过大</p>
<p>1）删除文件</p>
<p>alter database tempfile &#39;&#39;D:\Oracle\oradata\orcl\TEMP01.DBF&#39; drop;</p>
<p>2）建立新文件</p>
<p>alter tablespace temp add tempfile &#39;D:\Oracle\oradata\orcl\TEMP01.DBF&#39; size 2048M reuse autoextend on next 100M;</p>
<p>3）</p>
<p>select d.file_name, d.file_id, d.tablespace_name, d.bytes from dba_temp_files d;</p>
<p>4）关闭自动增长</p>
<p>alter database tempfile &#39; D:\Oracle\oradata\orcl\TEMP01.DBF&#39; autoextend off;</p>
<p>6、oracle12以上版本插拔数据库自启动</p>
<p>每次重启数据库后，创建的插拔数据库默认不自动打开。可创建触发器，在服务启动后自动打开插拔数据库。</p>
<p>centOS系统下，先切换oracle用户</p>
<p>su – oracle</p>
<p>1）命令窗口执行sqlplus / as sysdba，连接数据库；</p>
<p>2）复制并执行以下触发器语句，注意：最后面的/不可忽略</p>
<p>CREATE OR REPLACE TRIGGER open_pdbs</p>
<p>AFTER STARTUP ON DATABASE</p>
<p>BEGIN</p>
<p>EXECUTE IMMEDIATE &#39;ALTER PLUGGABLE DATABASE ALL OPEN&#39;;</p>
<p>END open_pdbs;</p>
<p>/</p>
<p>7、表空间扩容</p>
<p>oracle的表空间与数据文件是成对出现的，每一个数据文件对应一个表空间，一个表空间可以包含多个数据文件。单个数据文件最大为32G，可以通过增加数据文件的方式来为表空间扩容：</p>
<p>alter tablespace 表空间名称 add datafile 数据文件 size 350M autoextend on next 50M Maxsize UNLIMITED;</p>
<p>如：</p>
<p>alter tablespace ap_data add datafile &#39;/opt/oracle/oradata/ORCLCDB/ORCLPDB1/ap_data02.DBF&#39; size 350M autoextend on next 50M Maxsize UNLIMITED;</p>

          	</article>
        </div>
		</div>
  </body>
</html>
<script type="text/javascript" src="toc/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="toc/js/jquery.ztree.all-3.5.min.js"></script>
<script type="text/javascript" src="toc/js/ztree_toc.js"></script>
<script type="text/javascript" src="toc_conf.js"></script>

<SCRIPT type="text/javascript" >
<!--
$(document).ready(function(){
    var css_conf = eval(markdown_panel_style);
    $('#readme').css(css_conf)
    
    var conf = eval(jquery_ztree_toc_opts);
		$('#tree').ztree_toc(conf);
});
//-->
</SCRIPT>